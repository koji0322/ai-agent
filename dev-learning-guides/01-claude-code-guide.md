# Claude Code 基本操作ガイド

## 0. はじめに

このガイドは **Mac で Claude Code を使い始めるための自分用リファレンス** です。

- **想定読者**: VBA（Excel VBE）は使えるが、ターミナル操作は不慣れ
- **ゴール**: ターミナルの開き方から Claude Code の活用まで、一通り自分で進められるようになる
- **関連ガイド**:
  - [VS Code 基本操作ガイド](00-vscode-guide.md) — VS Code の使い方と Claude Code 連携
  - [Claude Code 実践ガイド](02-claude-code-practical-guide.md) — Git・GitHub・実践的な開発フロー（次のステップ）

> VBA では VBE（Visual Basic Editor）を開いてマウスでモジュールを選び、コードを書いて実行ボタンを押す。
> Claude Code では **ターミナル** という画面にコマンドを入力して操作する。やることは似ているが、操作方法が違う。

---

## 1. ターミナルの基礎

### ターミナルとは

ターミナルは **文字入力でパソコンを操作する画面**。

| VBA（VBE）の場合 | ターミナルの場合 |
|-----------------|---------------|
| Finder でファイルをダブルクリックして開く | `cd フォルダ名` と入力して移動する |
| メニューから「実行」をクリック | コマンドを入力して `Enter` で実行 |
| GUI（マウス操作）が中心 | CUI（キーボード入力）が中心 |

### ターミナルの開き方

1. `Cmd + Space` で **Spotlight** を開く
2. 「ターミナル」と入力して `Enter`
3. 黒い（または白い）画面が表示されたら OK

### 基本コマンド

操作の基本フローは **コマンドを入力 → `Enter` で実行 → 結果が表示される** の繰り返し。

| コマンド | 意味 | 使用例 |
|---------|------|--------|
| `pwd` | 今いる場所（フォルダ）を表示 | `pwd` → `/Users/matsubarakouji` |
| `ls` | フォルダの中身を一覧表示 | `ls` → ファイルやフォルダの一覧が出る |
| `cd フォルダ名` | 指定フォルダに移動 | `cd Documents` |
| `cd ..` | 一つ上のフォルダに戻る | `cd ..` |
| `mkdir フォルダ名` | 新しいフォルダを作る | `mkdir my-project` |

### パスの概念

Finder で「ホーム → Documents → my-project」と辿るフォルダ階層は、ターミナルでは **パス** として表現する。

```
/Users/matsubarakouji/Documents/my-project
```

- `/` はフォルダの区切り（Finder の `>` に相当）
- 先頭の `/` はパソコンの一番上の階層（ルート）を意味する

---

## 2. Claude Code のインストール

### 前提: Node.js の導入

Claude Code を動かすには **Node.js**（バージョン 18 以上）が必要。

```bash
# Node.js がインストール済みか確認
node --version
```

バージョン番号（例: `v20.11.0`）が表示されれば OK。
「command not found」と出た場合は、以下の手順で導入する。

```bash
# Homebrew がまだ入っていない場合は先にインストール
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# Node.js をインストール
brew install node
```

### Claude Code のインストール

```bash
npm install -g @anthropic-ai/claude-code
```

### 初回ログイン

```bash
# 任意のフォルダで起動
claude

# ブラウザが開くので Anthropic アカウントでログインする
# ログイン完了後、ターミナルに戻ると使える状態になる
```

### 動作確認

```bash
claude --version
```

バージョン番号が表示されればインストール成功。

---

## 3. Claude Code の起動と終了

### 起動

作業したいプロジェクトフォルダに移動してから起動する。

```bash
cd ~/Documents/my-project
claude
```

> VBA で「特定のブックを開いてからマクロを実行する」のと同じ感覚。
> Claude Code も「作業フォルダを指定してから起動する」ことで、そのフォルダ内のファイルを対象に作業してくれる。

### 終了

```
Ctrl + D
```

（`Ctrl` キーを押しながら `D` キー）

### 前回の会話を続ける

```bash
claude -c
```

中断した作業の続きから再開できる。

---

## 4. 基本的な使い方（対話の流れ）

Claude Code はチャット形式で操作する。日本語でやりたいことを入力し、`Enter` で送信する。

### 基本フロー

1. **指示を入力**: やりたいことを日本語で書く
2. **Claude が提案**: ファイルの変更案やコマンド案を表示する
3. **承認 or 拒否**: 提案内容を確認して `y`（承認）または `n`（拒否）を選ぶ

### 会話例 1: ファイルを作る

```
あなた: 「index.html を作って。Hello World と表示するだけのシンプルなページにして」

Claude: index.html を作成します。（ファイル内容が表示される）
        → 承認しますか？ [y/n]

あなた: y
```

### 会話例 2: コードの説明を聞く

```
あなた: 「main.py の内容を説明して」

Claude: main.py を読み込みました。このファイルは...（説明が表示される）
```

### 会話例 3: バグの修正

```
あなた: 「app.js を実行するとエラーが出る。原因を調べて修正して」

Claude: エラーの原因を調査します...
        原因: 12行目で未定義の変数を参照しています。
        修正案を提案します。（変更内容が表示される）
        → 承認しますか？ [y/n]

あなた: y
```

---

## 5. スラッシュコマンド一覧

Claude Code のセッション中に使える特殊コマンド。先頭に `/` をつけて入力する。

| コマンド | 機能 |
|---------|------|
| `/help` | ヘルプ表示 |
| `/clear` | 会話履歴をクリア |
| `/model` | AI モデルの選択変更 |
| `/plan` | プランモード開始（計画だけ立てて実装はしない） |
| `/resume` | 過去の会話を再開 |
| `/rewind` | 前の状態に戻す |
| `/init` | CLAUDE.md の初期化 |
| `/cost` | トークン使用統計の表示 |
| `/permissions` | 権限設定 |

---

## 6. キーボードショートカット

| ショートカット | 機能 |
|--------------|------|
| `Ctrl + C` | 入力キャンセル / 生成停止 |
| `Ctrl + D` | セッション終了 |
| `Esc` × 2回 | 変更の巻き戻し |
| `Shift + Tab` | パーミッションモード切り替え |
| `Ctrl + V` / `Cmd + V` | 画像の貼り付け |
| `Alt + P` | モデル切り替え |
| `Alt + T` | 拡張思考モード切り替え |

---

## 7. パーミッションモード

`Shift + Tab` で切り替えられる。Claude がファイルを変更したりコマンドを実行したりするときの確認ルールを決める。

| モード | 動作 |
|-------|------|
| **デフォルト** | 変更前に毎回承認を求める |
| **自動承認** | ファイル編集は自動実行される |
| **プランモード** | 読み取り専用。計画だけ立てて実装はしない |

> **初心者はデフォルトモードのままが安全。** 操作に慣れるまでは毎回確認が入るデフォルトがおすすめ。

---

## 8. CLAUDE.md について

プロジェクトフォルダに `CLAUDE.md` というファイルを置くと、Claude Code が起動時に自動で読み込む。プロジェクト固有のルールや情報を書いておくと、毎回指示しなくても Claude が把握してくれる。

### 自動生成

```
/init
```

セッション中にこのコマンドを実行すると、プロジェクトの内容を読み取って `CLAUDE.md` を自動生成してくれる。

### 手動で書く場合の例

```markdown
# プロジェクト概要
○○を管理する Web アプリ

# コーディング規約
- Python 3.12 を使用
- テストは pytest で実行
- 変数名はスネークケース（例: user_name）
```

> VBA で「標準モジュールの先頭にプロジェクトの説明コメントを書く」のに近い。
> ただし CLAUDE.md は Claude Code 専用の設定ファイルで、起動するたびに自動で読み込まれる。

---

## 9. 効果的な使い方のコツ

### 具体的に指示する

```
× 「バグを直して」
○ 「src/auth/login.py の 45 行目で空白文字が入力されたときにエラーになるバグを修正して」
```

### 先に調査 → 計画 → 実装

いきなり「直して」ではなく、まず調査させると精度が上がる。

```
1. 「このプロジェクトの構成を説明して」
2. 「login 機能に関するファイルを探して」
3. 「バグの原因を調査して」
4. 「修正案を提案して」（確認してから承認）
```

### 複雑なタスクはステップに分ける

一度に全部やらせず、段階的に進める。

### CLAUDE.md を活用する

プロジェクトの情報を `CLAUDE.md` に書いておくと、毎回説明する手間が省ける。

---

## 10. 困ったときは

### よくある問題と対処法

| 症状 | 対処法 |
|------|--------|
| `command not found: claude` | インストールできていない。`npm install -g @anthropic-ai/claude-code` を再実行 |
| `command not found: node` | Node.js が入っていない。「2. インストール」の手順を確認 |
| Claude が意図と違うファイルを編集した | `n` で拒否するか、`Esc` × 2回で巻き戻す |
| 会話がおかしくなった | `/clear` で履歴をリセットして最初からやり直す |
| 何をしていいかわからない | `/help` を実行してヘルプを確認 |

### セッション内でヘルプを見る

```
/help
```

使えるコマンドや操作方法が一覧表示される。迷ったらまずこれを実行する。
